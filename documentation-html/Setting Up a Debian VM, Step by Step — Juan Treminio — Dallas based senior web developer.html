<!DOCTYPE html>
<html class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
        <meta name="robots" content="index, follow">

    <link rel="apple-touch-icon" sizes="57x57" href="https://jtreminio.com/assets/img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://jtreminio.com/assets/img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://jtreminio.com/assets/img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://jtreminio.com/assets/img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://jtreminio.com/assets/img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://jtreminio.com/assets/img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://jtreminio.com/assets/img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://jtreminio.com/assets/img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://jtreminio.com/assets/img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://jtreminio.com/assets/img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://jtreminio.com/assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="https://jtreminio.com/assets/img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://jtreminio.com/assets/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://jtreminio.com/assets/img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>Setting Up a Debian VM, Step by Step — Juan Treminio — Dallas based senior web developer</title>

    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/css_002.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/css.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/bootstrap.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/font-awesome.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/github.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/jquery.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/clean-blog.css" rel="stylesheet">
    <link href="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/style.css" rel="stylesheet">

        <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/embed.js" async="" type="text/javascript"></script><style type="text/css">.fancybox-margin{margin-right:13px;}</style></head>
<body>
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top is-fixed is-visible">
        <div class="container-fluid">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://jtreminio.com/">Juan Treminio</a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://jtreminio.com/blog">Posts Archive</a></li>
                    <li><a href="https://jtreminio.com/blog/categories">Categories</a></li>
                    <li><a href="https://jtreminio.com/blog/tags">Tags</a></li>
                    <li><a href="https://jtreminio.com/hire-me">Hire Me!</a></li>
                    <li><a href="https://jtreminio.com/about">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="intro-header">
        <div class="container">
            <div class="row">
            </div>
        </div>
    </header>

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <article>
        <header>
            <h1>Setting Up a Debian VM, Step by Step</h1>
        </header>

        <div>
            <p></p>

<p>Previously, I created a tutorial on installing a 32-bit Ubuntu VM with PHP 5.3.x.
I’ve since moved on to PHP 5.4.x and Debian, which is universally considered a safer
bet for a server OS. This tutorial is what I will point back to in the future when I
want to show people how to create a VM, so you should consider the Ubuntu-based
tutorial obsolete.</p>

<p>In reality, Ubuntu is based on Debian, so the bulk of this tutorial will be very
similar to the Ubuntu one, albeit with some minor changes here and there.</p>

<h2 id="why-do-you-need-a-vm%3F">Why do you need a VM?</h2>

<p>There’s many reasons to do your development work on a virtual machine over your daily
desktop:</p>

<ul>
<li>It separates out programs and settings from your local desktop that can interfere
with the operations of a server. Did you know that if you run Skype and try to
install XAMPP, the server won’t start? That’s because Skype is using port 80 for
its connection, and you have to manually go in and disable this for XAMPP to work,</li>
<li>It keeps server-related software out of your desktop,</li>
<li>If you’re running Windows and a prepackaged server like XAMPP, you may have run into
some flakiness when trying to run PEAR, or install memcache or APC, or several of
the more popular PHP extensions. XAMPP is great for getting an “it just works”
server up and running within minutes, but the drawbacks become too great when
you want to do something more in-depth,</li>
<li>The most important reason of all is that you want your development environment to
mimic your production environment as closely as possible, and it’s even better if
it is an exact mirror of all the programs and settings. What usually happens when
you start a new job at a development company that has its act together is that
you’re given a VM image to use on your computer that mimics the production server.
The reasons for having your dev environment mimic prod is that it greatly reduces
the chances of hearing the phrase, “It works on my computer” because now you don’t
have to deal with the minor differences between software versions messing up your
application. This tutorial, however, is not meant to replace such a scenario. My
aim is to get you up and running a generic VM that allows you to quickly setup new,
or modify existing, applications, as is the case for freelancers who have multiple
clients that are running on generic webhosts.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>

<p>There’s two popular VM applications: <a href="https://www.virtualbox.org/">Oracle VirtualBox</a>
and <a href="http://www.vmware.com/">VMare</a>. For this tutorial we’ll be using Virtualbox,
which works across all major operating systems.</p>

<p><a href="https://www.virtualbox.org/wiki/Downloads">Download the appropriate package from VirtualBox’s website</a>
and install it on your computer. All the default settings will do fine.</p>

<p>The VM OS we’ll be installing is Debian. Go to this Debian mirror and download the
latest netinst ISO. It should match <code>debian-#.#.#-amd64-i386-netinst.iso</code>.
<a href="http://ftp.cae.tntech.edu/debian-cd/">Download Debian ISO to your computer</a>.</p>

<p></p><div class="alert alert-danger">The VM we will end up building and running is <em>not</em> secure and should
not be used in a production environment. You should only set this up as a virtual
machine on your local desktop!</div><p></p>

<h2 id="install-the-vm">Install the VM</h2>

<p>Open Virtualbox and hit the New button.</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step1.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step1.png" alt="New VirtualBox" width="300">
    </a>
</p>

<p>At the Create New Virtual Machine screen, name your VM “Debian VM” and hit Next</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step2.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step2.png" alt="VM Name" width="300">
    </a>
</p>

<p>Give your VM 1GB of RAM. If your computer has less than 6GB of RAM, you should
probably lower it down to 512MB.</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step3.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step3.png" alt="VM Ram" width="300">
    </a>
</p>

<p>Click next until you reach the Virtual desk storage details page, and select
“Fixed size”</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step4.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step4.png" alt="VM Storage Details" width="300">
    </a>
</p>

<p>Give it 8 GB of space</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step5.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step5.png" alt="8GB of Space" width="300">
    </a>
</p>

<p>Virtualbox will now create the initial VM image file which may take a minute or two.
When it is finished, close the process by hitting the “Create” button.</p>

<p>Right now you have your VM set up, but haven’t installed the actual operating system
on it. To do so, simply double click on the Debian VM line and click “next”.</p>

<p>Click the folder icon and search for your Debian iso file, clicking next until the
VM boots up.</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step6.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step6.png" alt="Select ISO File" width="300">
    </a>
</p>

<p>The Debian installation is very straight-forward, but there are a few pages I’d like
to highlight as being important.</p>

<p>Choose the 64 bit install option</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step7.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step7.png" alt="64bit Install Option" width="300">
    </a>
</p>

<p>At the hostname screen, choose what you would like to name your server. This name will
be used later on to access the server via SSH and when setting up a network folder on
your host machine (the desktop you use).</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step8.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step8.png" alt="Choose Your Hostname" width="300">
    </a>
</p>

<p>The Domain name field can be left blank, unless you require something different on
your network</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step9.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step9.png" alt="Leave Domain Name Field Blank" width="300">
    </a>
</p>

<p>Continue on, making sure to hit choose the defaults for most settings until you get
to the “Partition disks” page where you should choose “Guided – use entire disk and
set up LVM”</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step10.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step10.png" alt="Use Entire Disk and Setup LVM" width="300">
    </a>
</p>

<p>For easier VM management, place all files in a single partition</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step11.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step11.png" alt="All Files on One Partition" width="300">
    </a>
</p>

<p>Confirm changes</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step12.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step12.png" alt="Confirm Changes" width="300">
    </a>
</p>

<p>Finish creating partitions</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step13.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step13.png" alt="Finish Partitioning and Write Changes to File" width="300">
    </a>
</p>

<p>There’s another confirmation page, just continue on.</p>

<p>At the software selection screen, choose Mail server, SSH server and Standard system
utilities</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step15.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step15.png" alt="Software Selection" width="300">
    </a>
</p>

<p>Continue choosing the defaults until installation is complete and your VM reboots.</p>

<h2 id="install-sudo">Install sudo</h2>

<p>Debian doesn’t come with sudo out of the box, which is a handy little tool for
temporarily giving you root access.</p>

<pre><code class="language-bash hljs">$ su
$ apt-get install sudo
$ nano /etc/sudoers
</code></pre>

<p>Add below <code>root ALL=(ALL) ALL</code>:</p>

<pre><code class="language-bash hljs">USERNAME ALL=(ALL) NOPASSWD: ALL
</code></pre>

<p>replace <code>USERNAME</code> with your username. The <code>NOPASSWD</code> flag removes the requirement
to enter a password every time you use <code>sudo</code>. This is <em>not</em> a good idea on a
production server! Don’t be stupid!</p>

<p>Reboot your machine to make the changes take effect: <code>$ reboot</code></p>

<p>From now on all operations that require root should be run with the <code>sudo</code> prefix,
and you will not be required to enter a password each time.</p>

<h2 id="set-up-the-network">Set up the network</h2>

<p>Log in to your new VM using the username and password you chose during installation.
We’re going to add a network connection to your VM that will allow you to easily SSH
into the server.</p>

<pre><code class="language-bash hljs">$ sudo nano /etc/network/interfaces
</code></pre>

<p>Add the following to the end of the file:</p>

<pre><code class="language-bash hljs">auto eth1
iface eth1 inet static
address <span class="hljs-number">192.168</span>.<span class="hljs-number">56.101</span>
netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span>
</code></pre>

<p>and hit <code>CTRL + X</code>, then <code>Y</code> and <code>ENTER</code> to save changes.</p>

<p>Now shutdown the VM</p>

<pre><code class="language-bash hljs">$ sudo shutdown -h now
</code></pre>

<p>At the main VirtualBox screen, hit the settings button. then select Network from the
list on the left, choose Adapter 2 from the tabs, check “Enable Network Adapter” and
choose “Host-only Adapter” from the dropdown, then hit OK</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step16.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step16.png" alt="Changing Network Settings" width="300">
    </a>
</p>

<p>What we’ve done in this section is set up your VM to use a static IP address. This is
a good idea because it allows us to always access our VM using a single IP
address/hostname without having to look it up each time we boot.</p>

<p>By default VirtualBox utilizes the <code>192.168.56.1</code> address in your network, and it
assigns IP addresses in the <code>192.168.56.1xx</code> range to all your VMs.</p>

<p>By editing <code>/etc/network/interfaces</code> we told the OS that it should expect a network
resource to be available at that address.</p>

<h2 id="setup-your-hosts-file">Setup your hosts file</h2>

<p>You’ve got your server configured just right, now let’s add the hostname to your hosts
file!</p>

<p>Simply add the following entry into your hosts file. This should be done in your host
machine – be it Windows or Mac OS X or Linux, not the VM itself.</p>

<pre><code class="language-bash hljs"><span class="hljs-number">192.168</span>.<span class="hljs-number">56.101</span>    debian-vm
</code></pre>

<p>Keep in mind that for every domain you want to setup on your VM, you’ll need to add it
to your hosts file.</p>

<h2 id="log-in-via-ssh%21">Log in via SSH!</h2>

<p>Now that you have setup the network adapter in VirtualBox, and added the correct
settings to the VM interfaces file, you’re ready to actually SSH into your server
and begin installing everything!</p>

<p>You may be wondering why do you need to SSH and not simply use the VM window to do
all the work? The only reason for me is that the server does not support copy/paste!
There’s a lot of typing ahead and having the ability to simply copy/paste into your
terminal is going to speed everything up quite a bit!</p>

<p>For SSH on Windows, I use <a href="http://kitty.9bis.com/">KiTTy</a>. It’s an SSH client that
adds some nifty features to
<a href="http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html">PuTTY</a>. There’s
also <a href="http://en.poderosa.org/">Poderosa</a>. For Mac/Linux just use the terminal!</p>

<p>Since you’ve already added the correct lines to your hosts file, you can set the
address to connect to as <code>debian-vm</code> (or whatever you chose during setup).</p>

<p>Make sure to actually start the VM from VirtualBox before attempting to login. Just
start it, there’s no need to login from the VirtualBox server window.</p>

<h2 id="installing-the-basics">Installing the basics</h2>

<p>First thing’s first, we’re going to install the basic necessities, like <code>make</code>,
<code>curl</code>, <code>wget</code>, as well as the Apache server, Mercurial, Git and Subversion:</p>

<pre><code class="language-bash hljs">$ sudo apt-get install gcc make wget cron curl libxml2 libxml2-dev libzip-dev \
    libbz2-dev curl libcurl4-openssl-dev libcurl3 libcurl3-gnutls libjpeg62 \
    libjpeg62-dev libpng12-<span class="hljs-number">0</span> libpng12-dev libmcrypt-dev libmcrypt4 libxslt1-dev \
    libxml2-dev apache2 apache2-mpm-prefork apache2-prefork-dev apache2-utils \
    apache2.<span class="hljs-number">2</span>-common git mercurial subversion libcupsys2 samba samba-common
</code></pre>

<p>Edit the new Apache2 config file, <code>$ sudo nano /etc/apache2/httpd.conf</code> and add</p>

<pre><code class="language-bash hljs">ServerName localhost
</code></pre>

<p>You’ll now have the Apache server up and running! Just point your browser to
<a href="http://debian-vm/">http://debian-vm</a> and behold the magic!</p>

<p class="text-center">
    <a href="https://jtreminio.com/assets/posts/2012-07-04_setting-up-a-debian-vm-step-by-step/step17.png" class="fancybox">
        <img src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/step17.png" alt="MAGIC!" width="300">
    </a>
</p>

<p>Let’s enable Apache’s <code>ModRewrite</code> module now:</p>

<pre><code class="language-bash hljs">$ sudo a2enmod rewrite
</code></pre>

<p>This module allows us to use htaccess for pretty URLs.</p>

<h2 id="installing-mysql">Installing MySQL</h2>

<p>We’ll be installing MySQL 5.1 from repo, as this is easiest and works fairly well.</p>

<pre><code class="language-bash hljs">$ sudo apt-get install mysql-client-<span class="hljs-number">5.1</span> mysql-server-<span class="hljs-number">5.1</span>
</code></pre>

<p>On the screens asking for a MySQL password, leave it blank and hit enter. Since this
is only for a local server there’s no point in setting up a password.</p>

<p></p><div class="alert alert-error">Do NOT use a blank password in production environments! That’s just
stupid.</div><p></p>

<h2 id="setting-up-mysql">Setting up MySQL</h2>

<p>We need to update the IP address that MySQL will listen to for connections by editing
<code>$ sudo nano /etc/mysql/my.cnf</code></p>

<p>Do a search for <code>bind-address</code> (<code>CTRL + W</code>) and change the setting to:</p>

<pre><code class="language-bash hljs"><strike><span class="hljs-built_in">bind</span>-address            = <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span></strike>
<span class="hljs-built_in">bind</span>-address            = <span class="hljs-number">192.168</span>.<span class="hljs-number">56.101</span>
</code></pre>

<p>Now let’s grant the root MySQL user all permissions:</p>

<pre><code class="language-bash hljs">$ mysql -u root
GRANT ALL ON *.* TO <span class="hljs-string">'root'</span>@<span class="hljs-string">'%'</span>;
<span class="hljs-built_in">exit</span>;
</code></pre>

<p>and restart the service:</p>

<pre><code class="language-bash hljs">$ sudo service mysql restart
</code></pre>

<h2 id="compiling-php-5.4.9-from-source">Compiling PHP 5.4.9 from Source</h2>

<p>Next we’ll compile PHP from source.</p>

<p>The initial steps leading up to the compiling are fairly easy, we’re going to
install all build dependencies that PHP5 requires and also download the actual
source from php.net:</p>

<pre><code class="language-bash hljs">$ sudo apt-get build-dep php5
$ wget http://us2.php.net/get/php-<span class="hljs-number">5.4</span>.<span class="hljs-number">9</span>.tar.gz/from/this/mirror
$ mv mirror php-<span class="hljs-number">5.4</span>.<span class="hljs-number">9</span>.tar.gz
$ tar -xzf php-<span class="hljs-number">5.4</span>.<span class="hljs-number">9</span>.tar.gz
$ <span class="hljs-built_in">cd</span> php-<span class="hljs-number">5.4</span>.<span class="hljs-number">4</span>
</code></pre>

<p>Now we’ll actually compile PHP. The options shown are fairly standard and should
get you up and running with most applications. This process will take a few minutes.</p>

<pre><code class="language-bash hljs">$ ./configure --with-apxs2=/usr/bin/apxs2 --with-config-file-path=/etc/php5 \
    --with-mysql=mysqlnd --enable-inline-optimization --disable-debug \
    --enable-bcmath --enable-calendar --enable-ctype --enable-ftp --with-gd \
    --disable-sigchild --with-jpeg-dir=/usr --with-png-dir=/usr --with-zlib=yes \
    --with-zlib-dir=/usr --with-openssl --with-xsl=/usr --with-mcrypt=/usr \
    --with-mhash=/usr --enable-mbstring=all --with-curl=/usr/bin --enable-mbregex \
    --with-bz2=/usr --with-iconv --with-pdo-mysql=mysqlnd --enable-fileinfo \
    --with-pear --enable-exif --enable-soap --with-regex --enable-zip --with-tidy \
    --sysconfdir=/etc --with-gettext \
    --with-freetype-dir=/usr/include/freetype2/freetype --with-libxml-dir \
    --enable-sockets --enable-pcntl
$ make
$ sudo make -i install
</code></pre>

<p>Create a symlink to the bin</p>

<pre><code class="language-bash hljs">$ sudo ln <span class="hljs-operator">-s</span> /usr/<span class="hljs-built_in">local</span>/bin/php /usr/bin/php
</code></pre>

<p>Let the Apache web server know about PHP by first creating a conf file,
<code>$ sudo nano /etc/apache2/mods-available/php5.conf</code>, and adding</p>

<pre><code class="language-bash hljs">AddType application/x-httpd-php .php .phtml .php3
AddType application/x-httpd-php-source .phps
</code></pre>

<p>And finally enable PHP as an Apache module</p>

<pre><code class="language-bash hljs">$ sudo a2enmod php5
</code></pre>

<p>The last steps are copying over the default ini file and restarting Apache</p>

<pre><code class="language-bash hljs">$ sudo mkdir /etc/php5/
$ sudo cp ~/php-<span class="hljs-number">5.4</span>.<span class="hljs-number">9</span>/php.ini-development /etc/php5/php.ini
$ sudo service apache2 restart
</code></pre>

<p>Try it out with <code>$ php -v</code> and you should get back confirmation that you’ve
successfully installed PHP.</p>

<p>Before moving into editing the php.ini, or adding sites to apache’s vhosts, I want
to setup some simple shortcuts for quickly editing these and other files.</p>

<pre><code class="language-bash hljs">$ <span class="hljs-built_in">cd</span>
$ mkdir _lamp &amp;&amp; <span class="hljs-built_in">cd</span> _lamp
$ sudo ln <span class="hljs-operator">-s</span> /etc/apache2/httpd.conf
$ sudo ln <span class="hljs-operator">-s</span> /etc/apache2/sites-available/default
$ sudo ln <span class="hljs-operator">-s</span> /etc/php5/php.ini
</code></pre>

<p>Now whenever you want to update server-related files, just go to this <code>_lamp</code> folder
in your home directory and edit the files directly.</p>

<p>Now we’ll want to install Xdebug (because you’re using Xdebug to debug, right?)</p>

<pre><code class="language-bash hljs">$ <span class="hljs-built_in">cd</span>
$ git <span class="hljs-built_in">clone</span> git://github.com/derickr/xdebug.git
$ <span class="hljs-built_in">cd</span> xdebug*
$ phpize
$ ./configure --enable-xdebug
$ make
$ sudo make install
</code></pre>

<p>We'll also install some popular extensions:</p>

<pre><code class="language-bash hljs">$ sudo pecl install intl
$ sudo pecl install memcache
$ sudo pecl install pecl_http
</code></pre>

<p>And finally, configure our <code>php.ini</code> with all the extensions we’ve installed, as well
as some other sane defaults</p>

<pre><code class="language-bash hljs">$ sudo nano ~/_lamp/php.ini
</code></pre>

<p>To do a text search in nano, you press <code>CTRL + W</code>. To go to the next search result,
press <code>CTRL + W</code> again and just hit <code>ENTER</code> without typing anything.</p>

<pre><code class="language-bash hljs"><span class="hljs-comment"># ...</span>
error_reporting = -<span class="hljs-number">1</span>
<span class="hljs-comment"># ...</span>
display_errors = On
</code></pre>

<p>We want to use <code>-1</code> for <code>error_reporting</code> to get back every single error, warning and
notice possible.</p>

<p>Tell PHP where MySQL stuff is:</p>

<pre><code class="language-bash hljs">pdo_mysql.default_socket = /var/run/mysqld/mysqld.sock
mysql.default_socket = /var/run/mysqld/mysqld.sock
</code></pre>

<p>Search for <code>date.timezone</code> and edit:</p>

<pre><code class="language-bash hljs"><span class="hljs-comment"># ...</span>
<strike>;date.timezone =</strike>
date.timezone = America/Chicago
</code></pre>

<p>Right above date.timezone, add the following blocks:</p>

<pre><code class="language-bash hljs">[xdebug]
zend_extension=/usr/<span class="hljs-built_in">local</span>/lib/php/extensions/no-debug-non-zts-<span class="hljs-number">20100525</span>/xdebug.so
xdebug.remote_<span class="hljs-built_in">enable</span>=<span class="hljs-number">1</span>
xdebug.remote_connect_back=<span class="hljs-number">1</span>
xdebug.remote_port=<span class="hljs-number">9000</span>
xdebug.show_<span class="hljs-built_in">local</span>_vars=<span class="hljs-number">0</span>
xdebug.var_display_max_data=<span class="hljs-number">10000</span>
xdebug.var_display_max_depth=<span class="hljs-number">20</span>
xdebug.show_exception_trace=<span class="hljs-number">0</span>

extension=/usr/<span class="hljs-built_in">local</span>/lib/php/extensions/no-debug-non-zts-<span class="hljs-number">20100525</span>/http.so
extension=/usr/<span class="hljs-built_in">local</span>/lib/php/extensions/no-debug-non-zts-<span class="hljs-number">20100525</span>/memcache.so
extension=/usr/<span class="hljs-built_in">local</span>/lib/php/extensions/no-debug-non-zts-<span class="hljs-number">20100525</span>/intl.so
</code></pre>

<p>Exit nano by hitting <code>CTRL + X</code>, type <code>Y</code> to confirm and hit <code>ENTER</code> to exit.</p>

<p>Now restart Apache:</p>

<pre><code class="language-bash hljs">$ sudo service apache2 restart
</code></pre>

<p>You’ll now have the Xdebug extension installed, and all the new configuration
settings changed.</p>

<p>To test this out, we can print out <code>phpinfo()</code>, but first we need to give our user
permission to edit the webroot. Simply replace <code>USERNAME</code> with your username in the
lines below:</p>

<pre><code class="language-bash hljs">$ sudo usermod <span class="hljs-operator">-a</span> -G www-data USERNAME
$ sudo chown -R root:www-data /var/www
$ sudo chmod -R <span class="hljs-number">775</span> /var/www
</code></pre>

<p>Now go to the webroot, remove <code>index.html</code> that is currently in there and replace it
with a PHP file:</p>

<pre><code class="language-bash hljs">$ <span class="hljs-built_in">cd</span> /var/www
$ rm -F index.html
$ nano index.php
</code></pre>

<p>and enter in <code>&amp;lt;?php phpinfo();</code>.</p>

<p><a href="http://debian-vm/">Refresh your browser window</a>, which should show your PHP’s
information. Do a search for <code>xdebug</code> and if you find it you’ll have done everything
correctly.</p>

<h2 id="setting-up-samba">Setting up SAMBA</h2>

<p>SAMBA is a great utility that allows you to access remote locations as a shared
network file. This will be the way we access the files on our server for editing.</p>

<p>Replace <code>USERNAME</code> with your username:</p>

<pre><code class="language-bash hljs">$ sudo adduser USERNAME www-data
</code></pre>

<p>And edit the SAMBA config file <code>$ sudo nano /etc/samba/smb.conf</code></p>

<pre><code class="language-bash hljs">[www]
comment = www
path = /var/www
public = yes
writable = yes
valid users = USERNAME
create mask = <span class="hljs-number">0775</span>
directory mask = <span class="hljs-number">0775</span>
force user = USERNAME
force group = www-data
follow symlinks = yes
wide links = yes
</code></pre>

<p>Replace <code>USERNAME</code> with your username.</p>

<p>Set up a password:</p>

<pre><code class="language-bash hljs">$ sudo smbpasswd <span class="hljs-operator">-a</span> USERNAME
</code></pre>

<p>You’ll now be able to access the webroot and map it as a network drive. Just open
up Windows Explorer (or the tool of your OS of choice) and go to <code>\\debian-vm</code></p>

<p>Awesome!</p>

<h2 id="setting-up-apache">Setting up Apache</h2>

<p>I like to keep all my site configurations in a single file, as opposed to creating
a separate file for each site. So let’s edit the default <code>$ sudo nano ~/_lamp/default</code></p>

<p>We can erase everything in here, and enter the following</p>

<pre><code class="language-bash hljs">&lt;VirtualHost *:<span class="hljs-number">80</span>&gt;
    DocumentRoot <span class="hljs-string">"/var/www/"</span>
    ServerName localhost
    ServerAlias debian-vm
    ServerAlias *
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>ServerAlias *</code> is your catch-all.</p>

<p>Every site you add can always be in this file. Just copy/paste the above, changing
out the correct bits. For example, for a site called “google.dev”:</p>

<pre><code class="language-bash hljs">&lt;VirtualHost *:<span class="hljs-number">80</span>&gt;
    DocumentRoot <span class="hljs-string">"/var/www/google.dev"</span>
    ServerName google.dev
    ServerAlias www.google.dev
&lt;/VirtualHost&gt;
</code></pre>

<p>and restart Apache with <code>$ sudo service apache2 restart</code>.</p>

<h2 id="finishing-up">Finishing up</h2>

<p>You’ve now got a fully functional, working Linux VM running independently of what
you have on your daily OS.</p>

<p>Not only did you install Apache, PHP and MySQL, but you also set up important tools
like Xdebug and PHPUnit, both of which I will be writing about in articles not too
far in the future!</p>

<p>Remember, there’s no shame on using Windows or Mac OS X as your operating system,
but for best results you should always use a Linux VM to handle all your development
stuff!</p>

        </div>
                            <p class="tags">
            Tags:
                        <a href="https://jtreminio.com/blog/tags/server">server</a>,                         <a href="https://jtreminio.com/blog/tags/vm">vm</a>,                         <a href="https://jtreminio.com/blog/tags/tutorial">tutorial</a>                        </p>
        
                    <ul class="pager">
                                    <li class="previous"><a href="https://jtreminio.com/2012/04/setting-up-an-ubuntu-vm-step-by-step">Setting Up an Ubuntu VM, Step by Step →</a></li>
                                                    <li class="next"><a href="https://jtreminio.com/2012/07/xdebug-and-you-why-you-should-be-using-a-real-debugger">← Xdebug and You: Why You Should be Using a Real Debugger</a></li>
                            </ul>
            </article>

<div id="disqus_thread"><iframe verticalscrolling="no" horizontalscrolling="no" src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/a.html" style="width: 1px ! important; min-width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 2808px ! important;" title="Disqus" tabindex="0" scrolling="no" allowtransparency="true" name="dsq-app2" id="dsq-app2" frameborder="0" width="100%"></iframe></div>
<script>
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jtreminio'; // required: replace example with your forum shortname

                
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered byDisqus.</a>
</noscript>

            </div>
        </div>
    </div>

    <hr>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://github.com/jtreminio">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://twitter.com/juantreminio">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="mailto:jtreminio@gmail.com">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-at fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>

                    <p class="copyright text-muted">
                        Copyright © Juan Treminio 2016
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/jquery_002.js"></script>
    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/bootstrap.js"></script>
    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/modernizr-built.js"></script>
    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/highlight.js"></script>
    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/jquery.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/clean-blog.js"></script>
    <script>$(document).ready(function() {$('.fancybox').fancybox();});</script>

    
        

<iframe src="Setting%20Up%20a%20Debian%20VM,%20Step%20by%20Step%20%E2%80%94%20Juan%20Treminio%20%E2%80%94%20Dallas%20based%20senior%20web%20developer_elemei/a_002.html" style="width: 1px ! important; min-width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 100% ! important; position: fixed ! important; top: 0px ! important; right: 0px ! important; left: auto ! important; bottom: auto ! important; z-index: 2147483647 ! important; display: none ! important;" title="Disqus" tabindex="0" scrolling="no" allowtransparency="true" name="dsq-app5" id="dsq-app5" frameborder="0" width="100%"></iframe></body></html>